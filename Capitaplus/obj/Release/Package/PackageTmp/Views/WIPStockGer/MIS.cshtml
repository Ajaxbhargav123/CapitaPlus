@model Capitaplus.ViewModel.MIS
@{
    ViewBag.Title = "MIS";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>WIP Stock Generation</h2>
<table class="table">
    <tr>
        <th>
            <label>Job No</label>
        </th>
        <th>
            <label>BOM No</label>
        </th>
        <th>
            @Html.DisplayNameFor(model => model.saleOrder.ProductCode)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.saleOrder.ProductName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.saleOrder.Model)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.saleOrder.CellType)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.saleOrder.Capacity)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.saleOrder.Color)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.saleOrder.Brand)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.saleOrder.QtyToPro)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.saleOrder.SalesOrderNo)
        </th>
        <th>
            Action
        </th>
    </tr>

    @foreach (var item in Model.jobOrders)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.JobNo)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BomNo)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ProductCode)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ProductName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Model)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CellType)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Capacity)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Color)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Brand)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.QtyToPro)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.SalesOrderNo)
            </td>
            <td>
                <button type="button" id="btnadd" class="btn btn-primary">Add</button>
            </td>
        </tr>
    }

</table>
<hr />
<h2 class="si">Selected Item</h2>
<table class="table tablelist table-striped">
    <thead>
        <tr>
            <th>Job No</th>
            <th>Bom No</th>
            <th>Product Code</th>
            <th>Product Name</th>
            <th>Type</th>
            <th>Capacity</th>
            <th>Color</th>
            <th>Model</th>
            <th>Brand</th>
            <th>Qty To Produce</th>
            <th>Sales No</th>
            <th>WipProduce</th>
                <th>Balance Qty</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

@*Table Bom*@
<h2 class="si">BOM Items</h2>
<div class="row">
    <table id="tblbom" class="table tablebom table-striped">
        <thead>
            <tr>
                
                <th>Code</th>
                <th>Product Name</th>
                <th>Type</th>
                <th>Capacity</th>
                <th>Color</th>
                <th>Model</th>
                <th>Qty In Piece</th>
                <th>Standerd Consuption</th>
                <th>Actual Consuption</th>
                <th>Wastage Qty</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <button id="save" class="btn btn-primary">
        Save
    </button>
</div>

    
@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $('.tablelist').hide();
            $('#bomlist').hide();
            $('#save').hide();
            $('.si').hide();
            $('.tablebom').hide();
            $('.boml').hide();
            let ids;
            var qtytopro;
            let MrsId;
            
            $(document).on('click', '#btnadd', function () {
                $('.tablelist').show();
                $('.boml').show();
                let code = $(this).closest('tr');
                var salesId = $("TD", code).eq(0).html();
                var bomId = $("TD", code).eq(1).html().trim();
                var ProCode = $("TD", code).eq(2).html();
                var ProName = $("TD", code).eq(3).html();
                var model = $("TD", code).eq(4).html();
                var type = $("TD", code).eq(5).html();
                var capacity = $("TD", code).eq(6).html();
                var brand = $("TD", code).eq(8).html();
                var color = $("TD", code).eq(7).html();
                var salesNo = $("TD", code).eq(10).html();
                qtytopro = $("TD", code).eq(9).html();
                $(".tablelist tbody tr").remove();
                $(".tablelist").each(function () {
                    var tds = '<tr>';
                    jQuery.each($('tr:last', this), function () {
                        tds += '<td class="salesid">' + salesId + '</td>';
                        tds += '<td class="bomid">' + bomId + '</td>';
                        tds += '<td class="procode">' + ProCode + '</td>';
                        tds += '<td class="proname">' + ProName + '</td>';
                        tds += '<td class="type">' + type + '</td>';
                        tds += '<td class="capacity">' + capacity + '</td>';
                        tds += '<td class="color">' + color + '</td>';
                        tds += '<td class="model">' + model + '</td>';
                        tds += '<td class="brand">' + brand + '</td>';
                        tds += '<td class="qty">' + qtytopro + '</td>';
                        tds += '<td class="qty">' + salesNo + '</td>';
                        tds += '<td class="wip">' + '<input type="number" id="vippro" class="form-control"/>' + '</td>';
                        tds += '<td class="bal">' + '<input type="text" disabled id="balqty" class="form-control"/>' + '</td>';

                    });
                    tds += '</tr>';
                    if ($('tbody', this).length > 0) {
                        $('tbody', this).append(tds);
                        $('.tablelist').show();

                        $('.save').show();
                        $('#bomlist').show();
                        $('.si').show();
                    } else {
                        $(this).append(tds);
                    }
                });
                $(".tablebom tbody tr").remove();

                $('.tablebom').show();
                $('.bh').show();

                $.ajax({
                    url: '/JobCard/GetBomDetails',
                    data: { code: bomId },
                    type: 'json',
                    success: function (result) {
                        for (var i = 0; i < result.Data.length; i++) {
                            $("#tblbom").each(function () {
                                var tds = '<tr class="all">';
                                jQuery.each($('tr:last', this), function () {
                                   
                                    tds += '<td class="code">' + result.Data[i].RmCode + '</td>';
                                    tds += '<td class="proName">' + result.Data[i].MatName + '</td>';
                                    tds += '<td class="type">' + result.Data[i].Type + '</td>';
                                    tds += '<td class="capacity">' + result.Data[i].Capacity + '</td>';
                                    tds += '<td class="color">' + result.Data[i].Color + '</td>';
                                    tds += '<td class="model">' + result.Data[i].Model + '</td>';
                                    tds += '<td class="tqty">' + result.Data[i].Qty + '</td>';
                                    let wip = $('#vippro').val();
                                    let reqQty = wip * result.Data[i].Qty;

                                    tds += '<td class="sc">' + '<input type="number" value='+`${reqQty}`+' disabled id="scs" class="form-control"/>' + '</td>';
                                    tds += '<td class="ac">' + '<input type="number"  id="acs" class="form-control"/>' + '</td>';
                                    let qtyinstock = 120;
                                    let qtytopur = reqQty - qtyinstock;

                                    tds += '<td class="wc">' + '<input type="text" value=' + `${qtytopur}` + ' disabled id="wcs" class="form-control"/>' + '</td>';
                                    $('#save').show();
                                });
                                tds += '</tr>';

                                if ($('tbody', this).length > 0) {
                                    $('tbody', this).append(tds);
                                    $('.table').show();
                                    $('.save').show();
                                    $('#txtcode').val('');
                                    $('#proName').val('');
                                    $('#txtmodel').val('');
                                    $('#txtcell').val('');
                                    $('#txtcapacity').val('');
                                    $('#txtcolor').val('');
                                    $('#txtqtytopro').val('');

                                    //Calculations

                                } else {
                                    $(this).append(tds);

                                }
                            });
                        }

                    }
                })
            })

            //KeyUp Events
            $(document).on('keyup', '#vippro', function () {
                var qtyToProduce = parseInt($(".tablelist tbody tr").find('td').eq(9).text().trim());
                let qq =parseInt($(this).val());
               
                if (qq>qtyToProduce) {
                    new PNotify({
                        title: 'Error!',
                        text: 'Something Went Wrong',
                        type: 'error'
                    });
                    $('#balqty').val('');
                    $(this).val('');
                  
                }

              var wq = qtytopro - qq;

              $('#balqty').val(wq); 

              let qtywast = parseInt($('#vippro').val());
              $("#tblbom tbody").find('tr').each(function (i, el) {
                  var $tds = $(this).find('td');
                  let qty = parseInt($tds.eq(6).text().trim());
                  let IssuedQty = parseInt(qtywast * qty);
                  $(this).find('#scs', this).val(parseInt(IssuedQty));
              });
           
            })

            $(document).on('keyup', '#acs', function () {
               
                let qtybox = $(this).val();
                let individual = $(this).closest('tr').find('#scs').val();
                let res = parseInt(qtybox -individual);
                $(this).closest('tr').find('#wcs').val(res);
            })

        })
        $('#save').on('click', function () {
            var matName = [];
            
            //Save To WIP Table
            $.ajax({
                url: "/WIPStockGer/GetLastMrsId",
                timeout: 20000,
                type: "GET",
                ContentType: "application/json; charset=UTF-8",
                success: function (result) {
                    MrsId = parseInt(result) + 1; 
                        $("#tblbom tbody").find('tr').each(function (i, el) {
                            var item = {};
                            var $tds = $(this).find('td');
                            item.Code = $tds.eq(0).text();
                            item.MatName = $tds.eq(1).text();
                            item.Type = $tds.eq(2).text();
                            item.Capacity = $tds.eq(3).text();
                            item.Color = $tds.eq(4).text();
                            item.Model = $tds.eq(5).text();
                            item.Qty = $tds.eq(6).text().trim();
                            item.StanderdConsuption = $(this).find('#scs', this).val();
                            item.ActualConsuption = $(this).find('#acs', this).val();
                            item.WastQty = $(this).find('#wcs', this).val();
                            item.BomNo = $('.bomid').html().trim();
                            item.jobNo = $('.salesid').html().trim();
                            item.WipQty = $('#vippro').val();
                            //Save To WipTable 

                            $.ajax({
                                url: "/WIPStockGer/InsertIntoMIS",
                                data: { Wipno: MrsId, Code: item.Code, ProductlName: item.MatName, Type: item.Type, Capacity: item.Capacity, Model: item.Model, Color: item.Color, Qty: item.Qty, sc: item.StanderdConsuption, ac: item.ActualConsuption, WastQty: item.WastQty, bom: item.BomNo, jobno: item.jobNo, wipQty: item.WipQty },
                                type: "POST",
                                ContentType: "application/json; charset=UTF-8",
                                success: function () {
                                    $.ajax({
                                        url: "/WIPStockGer/GetMrsId",
                                        type: "GET",
                                        ContentType: "application/json; charset=UTF-8",
                                        success: function (result) {
                                            if (result.length > 0) {

                                                new PNotify({
                                                    title: 'Success!',
                                                    text: 'Done! Your Purchase Id Is: ' + result,
                                                    type: 'success'
                                                });


                                            }
                                        }
                                    })
                                   
                                },
                                error: function () {
                                    new PNotify({
                                        title: 'Error!',
                                        text: 'Something Went Wrong',
                                        type: 'error'
                                    });
                                }

                            });
                        }); 
                    } 
            }); 
         
            //Save to Stock Table  
            $.ajax({
                url: "/WIPStockGer/GetLastMrsId",
                timeout: 20000,
                type: "GET",
                ContentType: "application/json; charset=UTF-8",
                success: function (result) {  
                    MrsId = parseInt(result) + 1;
                    let qty = $('#vippro').val();
                    var item = {};
                  
                    $("#tblbom tbody").find('tr').each(function (i, el) { 
                        var $tds = $(this).find('td'); 
                         matName.push($tds.eq(1).text().trim().toUpperCase());
                         
                    }) 
                    var qtyToProduce = $(".tablelist tbody tr").find('td').eq(9).text().trim();
                    var salesno = $(".tablelist tbody tr").find('td').eq(10).text().trim();
                    //if length 1
                    if (matName.length == 1) {
                        //  For Battery
                        if (matName.indexOf("BATTERY") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 1;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA'; 
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        //  For PCB
                        if (matName.indexOf("PCB") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 1;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        //  For HOUSING
                        if (matName.indexOf("HOUSING") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 1;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        //  For HOUSING
                        if (matName.indexOf("ACCESSORY") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 1;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        //  For Button
                        if (matName.indexOf("BUTTON") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 1;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        //  For LED
                        if (matName.indexOf("LED") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 1;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        //  For Nikil Plate
                        if (matName.indexOf("NIKIL PLATE") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 1;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }
                    }

                    //if length 2
                    if (matName.length == 2) {
                        //  For Battery
                        if (matName.indexOf("BATTERY") > -1 && matName.indexOf("PCB") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 1;
                                item.Mat2 = 1;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }
                       
                        if (matName.indexOf("BATTERY") > -1 && matName.indexOf("HOUSING") > -1) {
                            
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 1;
                                item.Mat2 = 0;
                                item.Mat3 = 1;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            } 
                        } 
                      
                        if (matName.indexOf("BATTERY") > -1 && matName.indexOf("ACCESSORY") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 1;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 1;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }
 
                        if (matName.indexOf("BATTERY") > -1 && matName.indexOf("BUTTON") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 1;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 1;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("BATTERY") > -1 && matName.indexOf("LED") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 1;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 1;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("BATTERY") > -1 && matName.indexOf("NIKIL PLATE") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 1;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 1;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        
                        //  For PCB 

                        if (matName.indexOf("PCB") > -1 && matName.indexOf("HOUSING") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 1;
                                item.Mat3 = 1;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("PCB") > -1 && matName.indexOf("ACCESSORY") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 1;
                                item.Mat3 = 0;
                                item.Mat4 = 1;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("PCB") > -1 && matName.indexOf("BUTTON") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 1;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 1;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("PCB") > -1 && matName.indexOf("LED") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 1;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 1;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode +qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("PCB") > -1 && matName.indexOf("NIKIL PLATE") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 1;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 1;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }
                         

                        //  For Housing 
                        if (matName.indexOf("HOUSING") > -1 && matName.indexOf("ACCESSORY") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 1;
                                item.Mat4 = 1;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("HOUSING") > -1 && matName.indexOf("BUTTON") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 1;
                                item.Mat4 = 0;
                                item.Mat5 = 1;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("HOUSING") > -1 && matName.indexOf("LED") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 1;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 1;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("HOUSING") > -1 && matName.indexOf("NIKIL PLATE") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 1;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 1;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }


                        //  For ACCESSORY 
                        if (matName.indexOf("ACCESSORY") > -1 && matName.indexOf("BUTTON") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 1;
                                item.Mat5 = 1;
                                item.Mat6 = 0;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("ACCESSORY") > -1 && matName.indexOf("LED") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 1;
                                item.Mat5 = 0;
                                item.Mat6 = 1;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("ACCESSORY") > -1 && matName.indexOf("NIKIL PLATE") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 1;
                                item.Mat5 = 0;
                                item.Mat6 = 0;
                                item.Mat7 = 1;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        //  For BUTTON 
                        if (matName.indexOf("BUTTON") > -1 && matName.indexOf("LED") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 1;
                                item.Mat6 = 1;
                                item.Mat7 = 0;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        if (matName.indexOf("BUTTON") > -1 && matName.indexOf("NIKIL PLATE") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 1;
                                item.Mat6 = 0;
                                item.Mat7 = 1;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }

                        //  For BUTTON 
                       
                        if (matName.indexOf("LED") > -1 && matName.indexOf("NIKIL PLATE") > -1) {
                            for (var i = 0; i < qty; i++) {
                                let qq = Math.random() * qty;
                                item.WipNo = MrsId;
                                item.JobNo = $('.salesid').html().trim();
                                item.BomNo = $('.bomid').html().trim();
                                item.ProductCode = $('.procode').html().trim();
                                item.Location = 001;
                                item.Mat1 = 0;
                                item.Mat2 = 0;
                                item.Mat3 = 0;
                                item.Mat4 = 0;
                                item.Mat5 = 0;
                                item.Mat6 = 1;
                                item.Mat7 = 1;
                                item.Mat8 = 0;
                                item.Mat9 = 0;
                                item.Mat10 = 0;
                                item.QcNo = 'NA';
                                item.QcPass = 'NA';
                                item.Rework = 'NA';
                                item.QcRework = 'NA';
                                item.ProdSerialNo = item.JobNo + item.ProductCode + qq;
                                $.ajax({
                                    url: "/WIPStockGer/InsertIntoStockTable",
                                    data: { salesNo: salesno, Wipno: item.WipNo, JobNo: item.JobNo, BomNo: item.BomNo, ProductCode: item.ProductCode, location: item.Location, mat1: item.Mat1, mat2: item.Mat2, mat3: item.Mat3, mat4: item.Mat4, mat5: item.Mat5, mat6: item.Mat6, mat7: item.Mat7, mat8: item.Mat8, mat9: item.Mat9, mat10: item.Mat10, QCNo: item.QcNo, Qcpass: item.QcPass, rework: item.Rework, qcRework: item.QcRework, productSerialNo: item.ProdSerialNo, Qty: qtyToProduce, Recive: qty },
                                    type: "POST",
                                    ContentType: "application/json; charset=UTF-8",
                                    success: function () {
                                        $(".tablebom tbody tr").remove();
                                        $(".tablelist tbody tr").remove();
                                        $('.tablelist').hide();
                                        $('#bomlist').hide();
                                        $('#save').hide();
                                        $('.si').hide();
                                        $('.tablebom').hide();
                                        $('.boml').hide();
                                    },
                                    error: function () {
                                        new PNotify({
                                            title: 'Error!',
                                            text: 'Something Went Wrong',
                                            type: 'error'
                                        });
                                    }

                                });

                            }
                        }
                    }
                    
                }
            });
             
        })
    </script>
}
